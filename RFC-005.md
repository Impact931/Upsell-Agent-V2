# RFC-005: Upsell Agent v3 Redesign and Feature Expansion

**Status:** In Development  
**Branch:** upsell-agent-v3  
**Start Date:** September 1, 2025  

## BLUF
This RFC defines the next major version (v3) of the Upsell Agent platform, focusing on rewriting the AI scripting engine to follow the W.E.L.L. Framework™, redesigning navigation, and introducing core business functionality including product-level sales tracking, subscription payments, and complete branding customization.

## Development Strategy
- **Local First:** Build and test all features locally before deployment
- **Branch Isolation:** Develop on `upsell-agent-v3` branch to preserve working v2
- **Sequential Implementation:** V3 Branch → MCP Integration → Navigation → Sales Tracking

## Implementation Phases

### Phase 1: Foundation ✅ IN PROGRESS
- [x] Create `upsell-agent-v3` branch
- [x] Set up local development environment  
- [ ] Configure MCP server integrations

### Phase 2: MCP Integration 
- [ ] Set up Sequential Thinking MCP server
- [ ] Integrate Context7 MCP for business logic
- [ ] Test MCP communication and fallbacks

### Phase 3: Navigation Fixes
- [ ] Fix broken Dashboard links from Products/Materials
- [ ] Implement deep linking: Dashboard → Product Details → Training Materials
- [ ] Ensure mobile navigation consistency

### Phase 4: Sales Tracking & Analytics  
- [ ] Add "Sold One" button per product
- [ ] Create sales tracking database schema
- [ ] Build Analytics dashboard (fix 404 error)
- [ ] Implement real-time sales metrics

## Success Metrics
- 90% of scripts pass QA for W.E.L.L. Framework compliance
- Navigation paths tested with 100% success rate
- Analytics shows real-time data with <5-second latency
- Local testing complete before any deployment

## Technical Architecture

### Database Schema Extensions
```sql
-- Sales tracking
CREATE TABLE sales_tracking (
  id CUID PRIMARY KEY,
  user_id CUID REFERENCES users(id),
  product_id CUID REFERENCES products(id), 
  sale_amount DECIMAL(10,2),
  sale_date TIMESTAMP DEFAULT NOW()
);

-- Notifications
CREATE TABLE notifications (
  id CUID PRIMARY KEY,
  user_id CUID REFERENCES users(id),
  type VARCHAR(50) NOT NULL,
  message TEXT,
  read BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT NOW()
);
```

### MCP Integration Points
- **Sequential Thinking MCP:** Enhanced AI reasoning for consultative scripts
- **Context7 MCP:** Business logic and payment workflow management

---

**Current Status:** Phase 1 Complete - V3 branch created and ready for development.  
**Next:** MCP server integration setup.